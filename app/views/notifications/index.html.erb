<% content_for :title, "Mes notifications" %>

<div class="container py-5" style="max-width: 800px; margin-top: 100px;">

  <!-- Titre principal -->
  <h1 class="text-center fw-bold mb-5 text-black" style="font-size: 2rem;">Mes notifications</h1>

  <% if @notifications.any? %>
    <div class="list-group rounded-4 shadow-sm overflow-hidden">

      <% @notifications.each do |notification| %>
        <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-start <%= notification.read ? '' : 'bg-light' %> p-3 border-bottom">

          <div class="me-auto text-dark">
            <strong>
              <%= link_to notification.actor.username, user_path(notification.actor), class: "text-decoration-none text-dark" %>
            </strong>

            <span class="ms-1"><%= notification.action %></span>

            <%= link_to "→ Voir", polymorphic_path(notification.notifiable), class: "text-decoration-none fw-semibold ms-2" %>
          </div>

          <small class="text-muted"><%= time_ago_in_words(notification.created_at) %> ago</small>
        </div>
      <% end %>

    </div>

    <!-- Marquer toutes comme lues -->
    <div class="text-center mt-4">
      <%= link_to "ls Marquer toutes comme lues", mark_as_read_notifications_path, method: :patch,
          class: "btn btn-outline-dark rounded-pill px-4 py-2 fw-semibold" %>
    </div>

  <% else %>
    <div class="alert alert-secondary text-center mt-5">
      Vous n’avez aucune notification pour le moment.
    </div>
  <% end %>

</div>
