<% content_for :title, "Chronicles" %>

<div class="max-w-4xl mx-auto py-8 px-4">
  <% if notice %>
    <div class="mb-4 p-3 bg-green-100 border border-green-300 rounded text-green-800">
      <%= notice %>
    </div>
  <% end %>

  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">Latest Chronicles</h1>
    <%= link_to "New Chronicle", new_chronicle_path, class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm" %>
  </div>

  <% @chronicles.each do |chronicle| %>
    <div class="border border-gray-200 rounded-lg p-4 mb-6 shadow-sm bg-white">
      <h2 class="text-xl font-semibold text-blue-700 mb-2">
        <%= link_to chronicle.title, chronicle_path(chronicle) %>
      </h2>

      <% if chronicle.photo.attached? %>
        <%= image_tag chronicle.photo.variant(resize_to_limit: [600, 400]), class: "rounded mb-4" %>
      <% end %>

      <p class="text-gray-700 mb-2"><%= truncate(chronicle.content, length: 200) %></p>
      <p class="text-sm text-gray-500">By <%= chronicle.user.username %></p>
    </div>
  <% end %>
</div>
