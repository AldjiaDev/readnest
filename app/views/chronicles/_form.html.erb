<%= form_with(model: chronicle, local: true, html: { multipart: true }, class: "bg-white p-4 rounded shadow-sm") do |form| %>
  <% if chronicle.errors.any? %>
    <div class="alert alert-danger">
      <h4 class="alert-heading"><%= pluralize(chronicle.errors.count, "erreur") %> empêchent la sauvegarde :</h4>
      <ul class="mb-0">
        <% chronicle.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- Titre -->
  <div class="mb-3">
    <%= form.label :title, "Titre de la chronique", class: "form-label fw-semibold" %>
    <%= form.text_field :title, class: "form-control" %>
  </div>

  <!-- Auteur·e -->
  <div class="mb-3">
    <%= form.label :author, "Auteur·e du livre", class: "form-label fw-semibold" %>
    <%= form.text_field :author, class: "form-control" %>
  </div>

  <!-- Titre du livre -->
  <div class="mb-3">
    <%= form.label :book_title, "Titre du livre", class: "form-label fw-semibold" %>
    <%= form.text_field :book_title, class: "form-control" %>
  </div>

  <!-- Maison d’édition -->
  <div class="mb-3">
    <%= form.label :publisher, "Maison d’édition", class: "form-label fw-semibold" %>
    <%= form.text_field :publisher, class: "form-control" %>
  </div>

  <!-- Contenu -->
  <div class="mb-3">
    <%= form.label :content, "Contenu de la chronique", class: "form-label fw-semibold" %>
    <%= form.text_area :content, rows: 8, class: "form-control" %>
  </div>

  <!-- Image -->
  <div class="mb-3">
    <%= form.label :photo, "Image du livre", class: "form-label fw-semibold" %>
    <%= form.file_field :photo, class: "form-control" %>

    <% if chronicle.photo.attached? %>
      <div class="mt-3">
        <p class="form-text">Image actuelle :</p>
        <%= image_tag chronicle.photo.variant(resize_to_limit: [400, 400]), class: "img-thumbnail" %>
      </div>
    <% end %>
  </div>

  <!-- Bouton -->
  <div class="text-center pt-3">
    <%= form.submit "Publier la chronique", class: "btn btn-primary px-4 py-2" %>
  </div>
<% end %>
